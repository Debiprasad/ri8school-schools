$(document).ready(function(){$(".taskProgress")&&$(".taskProgress").each(function(){var e=parseInt($(this).html());$(this).progressbar({value:e});$(this).parent().find(".percent").html(e+"%")})});

$(document).ready(function(){
	
	/* ---------- Chart with points ---------- */
	function randNumAppearance(){
		return ((Math.floor( Math.random()* (1+40-20) ) ) + 200);
	}

	if ($("#apperance_in_searches").length) {	
		var apperances = [[1, 5+randNumAppearance()], [2, 10+randNumAppearance()], [3, 15+randNumAppearance()], [4, 20+randNumAppearance()],[5, 25+randNumAppearance()],[6, 30+randNumAppearance()],[7, 35+randNumAppearance()],[8, 40+randNumAppearance()],[9, 45+randNumAppearance()],[10, 50+randNumAppearance()],[11, 55+randNumAppearance()],[12, 60+randNumAppearance()],[13, 65+randNumAppearance()],[14, 70+randNumAppearance()],[15, 75+randNumAppearance()],[16, 80+randNumAppearance()],[17, 85+randNumAppearance()],[18, 90+randNumAppearance()],[19, 85+randNumAppearance()],[20, 80+randNumAppearance()],[21, 75+randNumAppearance()],[22, 80+randNumAppearance()],[23, 75+randNumAppearance()],[24, 70+randNumAppearance()],[25, 65+randNumAppearance()],[26, 75+randNumAppearance()],[27,80+randNumAppearance()],[28, 85+randNumAppearance()],[29, 90+randNumAppearance()], [30, 95+randNumAppearance()]];


		var plot = $.plot($("#apperance_in_searches"),
			   [ { data: apperances, label: "Apperances"} ], {
				   series: {
					   lines: { show: true,
								lineWidth: 2,
								fill: true, fillColor: { colors: [ { opacity: 0.5 }, { opacity: 0.2 } ] }
							 },
					   points: { show: true, 
								 lineWidth: 2 
							 },
					   shadowSize: 0
				   },
				   grid: { hoverable: true, 
						   clickable: true, 
						   tickColor: "#f9f9f9",
						   borderWidth: 0
						 },
				   colors: ["#3B5998"],
					xaxis: {ticks:6, tickDecimals: 0},
					yaxis: {ticks:3, tickDecimals: 0},
				 });

		function showTooltip(x, y, contents) {
			$('<div id="tooltip">' + contents + '</div>').css( {
				position: 'absolute',
				display: 'none',
				top: y + 5,
				left: x + 5,
				border: '1px solid #fdd',
				padding: '2px',
				'background-color': '#dfeffc',
				opacity: 0.80
			}).appendTo("body").fadeIn(200);
		}

		var previousPoint = null;
		$("#apperance_in_searches").bind("plothover", function (event, pos, item) {
			$("#x").text(pos.x.toFixed(2));
			$("#y").text(pos.y.toFixed(2));

				if (item) {
					if (previousPoint != item.dataIndex) {
						previousPoint = item.dataIndex;

						$("#tooltip").remove();
						var x = item.datapoint[0].toFixed(2),
							y = item.datapoint[1].toFixed(2);

						showTooltip(item.pageX, item.pageY,
									item.series.label + " of " + x + " = " + y);
					}
				}
				else {
					$("#tooltip").remove();
					previousPoint = null;
				}
		});
	
	}
	
	function randNumChecked(){
		return ((Math.floor( Math.random()* (1+40-20) ) ) + 20);
	}
	
	/* ---------- Chart with points ---------- */
	if($("#checked_the_details").length)
	{	
		var checked = [[1, 5+randNumChecked()], [2, 10+randNumChecked()], [3, 15+randNumChecked()], [4, 20+randNumChecked()],[5, 25+randNumChecked()],[6, 30+randNumChecked()],[7, 35+randNumChecked()],[8, 40+randNumChecked()],[9, 45+randNumChecked()],[10, 50+randNumChecked()],[11, 55+randNumChecked()],[12, 60+randNumChecked()],[13, 65+randNumChecked()],[14, 70+randNumChecked()],[15, 75+randNumChecked()],[16, 80+randNumChecked()],[17, 85+randNumChecked()],[18, 90+randNumChecked()],[19, 85+randNumChecked()],[20, 80+randNumChecked()],[21, 75+randNumChecked()],[22, 80+randNumChecked()],[23, 75+randNumChecked()],[24, 70+randNumChecked()],[25, 65+randNumChecked()],[26, 75+randNumChecked()],[27,80+randNumChecked()],[28, 85+randNumChecked()],[29, 90+randNumChecked()], [30, 95+randNumChecked()]];

		var plot = $.plot($("#checked_the_details"),
			   [ { data: checked, label: "Followers"} ], {
				   series: {
					   lines: { show: true,
								lineWidth: 2,
								fill: true, fillColor: { colors: [ { opacity: 0.5 }, { opacity: 0.2 } ] }
							 },
					   points: { show: true, 
								 lineWidth: 2 
							 },
					   shadowSize: 0
				   },
				   grid: { hoverable: true, 
						   clickable: true, 
						   tickColor: "#f9f9f9",
						   borderWidth: 0
						 },
				   colors: ["#1BB2E9"],
					xaxis: {ticks:6, tickDecimals: 0},
					yaxis: {ticks:3, tickDecimals: 0},
				 });

		function showTooltip(x, y, contents) {
			$('<div id="tooltip">' + contents + '</div>').css( {
				position: 'absolute',
				display: 'none',
				top: y + 5,
				left: x + 5,
				border: '1px solid #fdd',
				padding: '2px',
				'background-color': '#dfeffc',
				opacity: 0.80
			}).appendTo("body").fadeIn(200);
		}

		var previousPoint = null;
		$("#checked_the_details").bind("plothover", function (event, pos, item) {
			$("#x").text(pos.x.toFixed(2));
			$("#y").text(pos.y.toFixed(2));

				if (item) {
					if (previousPoint != item.dataIndex) {
						previousPoint = item.dataIndex;

						$("#tooltip").remove();
						var x = item.datapoint[0].toFixed(2),
							y = item.datapoint[1].toFixed(2);

						showTooltip(item.pageX, item.pageY,
									item.series.label + " of " + x + " = " + y);
					}
				}
				else {
					$("#tooltip").remove();
					previousPoint = null;
				}
		});
	
	}
	
	/* ---------- Chart with points ---------- */
	if($("#stats-chart").length)
	{
		var visitors = [[1, randNum()-10], [2, randNum()-10], [3, randNum()-10], [4, randNum()],[5, randNum()],[6, 4+randNum()],[7, 5+randNum()],[8, 6+randNum()],[9, 6+randNum()],[10, 8+randNum()],[11, 9+randNum()],[12, 10+randNum()],[13,11+randNum()],[14, 12+randNum()],[15, 13+randNum()],[16, 14+randNum()],[17, 15+randNum()],[18, 15+randNum()],[19, 16+randNum()],[20, 17+randNum()],[21, 18+randNum()],[22, 19+randNum()],[23, 20+randNum()],[24, 21+randNum()],[25, 14+randNum()],[26, 24+randNum()],[27,25+randNum()],[28, 26+randNum()],[29, 27+randNum()], [30, 31+randNum()]];

		var plot = $.plot($("#stats-chart"),
			   [ { data: visitors, label: "visitors" } ], {
				   series: {
					   lines: { show: true,
								lineWidth: 3,
								fill: true, fillColor: { colors: [ { opacity: 0.5 }, { opacity: 0.2 } ] }
							 },
					   points: { show: true },
					   shadowSize: 2
				   },
				   grid: { hoverable: true, 
						   clickable: true, 
						   tickColor: "#eee",
						   borderWidth: 0,
						 },
				   colors: ["#b1d3d4"],
					xaxis: {ticks:11, tickDecimals: 0},
					yaxis: {ticks:11, tickDecimals: 0},
				 });

		function showTooltip(x, y, contents) {
			$('<div id="tooltip">' + contents + '</div>').css( {
				position: 'absolute',
				display: 'none',
				top: y + 5,
				left: x + 5,
				border: '1px solid #fdd',
				padding: '2px',
				'background-color': '#dfeffc',
				opacity: 0.80
			}).appendTo("body").fadeIn(200);
		}

		var previousPoint = null;
		$("#stats-chart").bind("plothover", function (event, pos, item) {
			$("#x").text(pos.x.toFixed(2));
			$("#y").text(pos.y.toFixed(2));

				if (item) {
					if (previousPoint != item.dataIndex) {
						previousPoint = item.dataIndex;

						$("#tooltip").remove();
						var x = item.datapoint[0].toFixed(2),
							y = item.datapoint[1].toFixed(2);

						showTooltip(item.pageX, item.pageY,
									item.series.label + " of " + x + " = " + y);
					}
				}
				else {
					$("#tooltip").remove();
					previousPoint = null;
				}
		});
		


		$("#sincos").bind("plotclick", function (event, pos, item) {
			if (item) {
				$("#clickdata").text("You clicked point " + item.dataIndex + " in " + item.series.label + ".");
				plot.highlight(item.series, item.datapoint);
			}
		});
	}
	
	/* ---------- Stack chart ---------- */
	if($("#visits_vs_admissions").length)
	{
		var d1 = [];
		for (var i = 0; i <= 10; i += 1)
		d1.push([i, parseInt(Math.random() * 30)]);

		var d2 = [];
		for (var i = 0; i <= 10; i += 1)
			d2.push([i, parseInt(Math.random() * 30)]);

		var stack = 0, bars = true, lines = false, steps = false;

		function plotWithOptions() {
			$.plot($("#visits_vs_admissions"), [ d1, d2 ], {
				series: {
					stack: stack,
					lines: { show: lines, fill: true, steps: steps },
					bars: { show: bars, barWidth: 0.6 },
				},
				colors: ["#FA5833", "#2FABE9"]
			});
		}

		stack = true;
		lines = true;
		bars = false;
		plotWithOptions();
	}
	

});